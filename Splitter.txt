import re

def html_to_markdown(text: str) -> str:
    # Normalize broken tags first
    text = text.replace("<br", "<br>")  # fix incomplete <br
    text = text.replace("<ul", "<ul>")  # same for ul
    text = text.replace("<li", "<li>")  # same for li
    text = text.replace("</li", "</li>")
    text = text.replace("</ul", "</ul>")

    # Then convert to markdown
    text = re.sub(r"<br\s*/?>", "\n", text)
    text = re.sub(r"</?ul>", "", text)
    text = re.sub(r"<li>(.*?)</li>", r"- \1\n", text)

    return text
