useEffect(() => {
  if (!chatDisplayRef.current) return;
  
  const chatDisplay = chatDisplayRef.current;
  const isNearBottom = chatDisplay.scrollHeight - chatDisplay.scrollTop - chatDisplay.clientHeight < 100;
  
  if (isNearBottom) {
    requestAnimationFrame(() => {
      if (chatDisplayRef.current) {
        chatDisplayRef.current.scrollTo({
          top: chatDisplayRef.current.scrollHeight,
          behavior: 'smooth'
        });
      }
    });
  }
}, [messages]);
