-useEffect(() => {
-  if (!chatDisplayRef.current) return;
-  chatDisplayRef.current.scrollTo({
-    top: chatDisplayRef.current.scrollHeight,
-    behavior: "smooth"
-  });
-}, [messages]);
useEffect(() => {
  const el = chatDisplayRef.current;
  if (!el) return;
  if (!isAtBottomRef.current) return; // donâ€™t scroll if user scrolled up

  requestAnimationFrame(() => {
    el.scrollTo({
      top: el.scrollHeight,
      behavior: "smooth",
    });
  });
}, [messages]);
