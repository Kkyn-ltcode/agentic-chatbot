from langchain_core.runnables import RunnableLambda

# This component will just print its input and pass it along
def print_output(input):
    print("--- DEBUGGING: Output of the first chain step ---")
    print("Type of input:", type(input))
    print("Contents:", input)
    print("--------------------------------------------------")
    return input

# The updated base_rag_chain with our debug step
base_rag_chain = (
    {"context": retriever, "question": RunnablePassthrough()}
    | RunnableLambda(print_output)  # Add the debug step here!
    | rag_prompt
    | llm
    | StrOutputParser()
)
